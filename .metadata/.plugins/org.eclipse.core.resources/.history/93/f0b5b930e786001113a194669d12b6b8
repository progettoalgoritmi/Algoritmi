package flyingsquirrel;

import java.io.IOException;
import java.net.InetSocketAddress;
import java.net.SocketAddress;
import java.nio.ByteBuffer;
import java.nio.CharBuffer;
import java.nio.channels.SocketChannel;

public class FlyingSquirrel {

	public static void main(String[] args) throws IOException, InterruptedException {
		String hostname = "localhost";
		int port = 5222;
		SocketAddress address = new InetSocketAddress(hostname, port);
		SocketChannel client = SocketChannel.open(address);
		client.configureBlocking(false);
		
		ByteBuffer inbuff = ByteBuffer.allocate(10000);
		ByteBuffer outbuff = ByteBuffer.allocate(10000);
		
		String handshake = "<stream:stream " +
				"to='" + hostname + "' " +
				"xmlns='jabber:client' " +
				"xmlns:stream='http://etherx.jabber.org/streams' " +
				"version='1.0'>";
		
		outbuff.put(handshake.getBytes());
		client.write(inbuff);
		Thread.sleep(100);
		while (true) client.read(outbuff);
		//CharBuffer cb = outbuff.asCharBuffer();
		//System.out.println(cb);
	}
}
